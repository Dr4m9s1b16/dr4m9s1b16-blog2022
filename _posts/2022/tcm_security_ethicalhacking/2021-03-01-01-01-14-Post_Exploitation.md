---
layout: post
title:  "TCM_security_EthicalHacking Part 14"
author: haran
categories: [TCM , Cyber Security]
image: post_img/2021/01/01_1/tcm.png
beforetoc: "Information Gathering"
toc: true
---

Information Gathering

Post Exploitation
File Transferes

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/1.jpg)

• CertUtil blocked use ftp in windows.
• metaspolit has upload download feature.

hosting file in attacker machine kali and then grab it using wget /ftp 
linux most probably ftp

python -m pyftpdlib 21(attacker machine/kaliip) - linux
ftp 10.10.10.10 - windows

• 
maintaing access Overview

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/2.jpg)

• we are working on a shell and user decided to shutdown the shell we have to maintain access.

• create a user once you get aceess (recommended) 

  sudo useradd username
  sudo passwd username  
 
![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/3.jpg)
 
 schedule tasks = it runs periodically every 5 sec 
Pivoting

DUal home network for a PC

network A          (Available to us)
192.168.57.0/24

 
network B          (not available to us)
10.10.10.0/24



• If your local small network has it’s own ROUTERS then you must set up “Manual routes” to obtain full access (e.g., access beyond the first router).

• You use the DEFAULT ROUTE (default gateway) setting on the LARGE network side (e.g., the Internet) and specific manual routes on the SMALL network side.

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/4.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/5.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/6.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/7.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/8.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/9.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/10.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/11.jpg)


Attacker machine

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/12.jpg)

Intermediate machine

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/13.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/14.jpg)


pivoting machine

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/15.jpg)

attacker --------→ Intermediate -----------→ pivoting machine
                  192.168.57.141              10.10.10.129
                  10.10.10.128

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/16.jpg)

Pivoting Walkthrough

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/17.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/18.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/19.jpg)

192.168.57.141  = intermediate windows

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/20.jpg)

options 

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/21.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/22.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/23.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/24.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/25.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/26.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/27.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/28.jpg)

another way

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/29.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/30.jpg)

It is talked to 10.10.10.129

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/31.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/32.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/33.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/34.jpg)

background this task

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/35.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/36.jpg)

read proxy chain.
ssh pivoting etc

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/37.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2021/01/01_14/38.jpg)
