---
layout: post
title:  "01_02-VM setup"
author: haran
categories: [DevOps,DevOps Beginners to Advanced Course]
image: post_img/2022/03/17_0/main.png
beforetoc: "Basic SetUp of VM for production"
toc: true
comments: false
rating: 3.5
---

Kops, is an open source project used to set up Kubernetes clusters.

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/1.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/2.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/3.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/4.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/5.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/6.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/7.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/8.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/9.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/10.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/11.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/12.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/13.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/14.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/15.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/16.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/17.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/18.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/19.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/20.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/21.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/22.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/23.jpg)





## Continuous Integration

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/24.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/25.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/26.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/27.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/28.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/29.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/30.jpg)


## Continuous delivery

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/31.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/32.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/33.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/34.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/35.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/36.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/37.jpg)

=> Jenkins octobus for CI/CD Automation
=> Terraform - Infrastructure automation

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/38.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/39.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/40.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/41.jpg)


## 02-setup

## SetUp     

**Source Code for Course**

[https://github.com/devopyamlydclub/vprofile-repo](https://github.com/devopyamlydclub/vprofile-repo)

**Source Code for Projects in the course.**

[https://github.com/devopyamlydclub/vprofile-project](https://github.com/devopyamlydclub/vprofile-project)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/42.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/43.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/44.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/45.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/46.jpg)

## Install chcolatey windows package installer


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/47.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/48.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/49.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/50.jpg)

## Docker hub setup

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/51.jpg)


## SonarCloud Setup

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/52.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/53.jpg)

## Cretae AWS Account

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/54.jpg)

ACM- Service => Amazon https service Certificate


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/55.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/56.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/57.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/58.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/59.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/60.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/61.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/62.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/63.jpg)


- Use the IAM User to login to the account.

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/64.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/65.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/66.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/67.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/68.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/69.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/70.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/71.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/72.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/73.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/74.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/75.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/76.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/77.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/78.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/79.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/80.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/81.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/82.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/83.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/84.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/85.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/86.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/87.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/88.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/89.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/90.jpg)

## What is a DNS CNAME record?

The ‘canonical name’ (CNAME) record is used in lieu of an [A record](https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/), when a [domain](https://www.cloudflare.com/learning/dns/glossary/what-is-a-domain-name/) or subdomain is an alias of another domain. ==All CNAME records must point to a domain, never to an [IP address](https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/).== Imagine a scavenger hunt where each clue points to another clue, and the final clue points to the treasure. ==A domain with a CNAME record is like a clue that can point you to another clue (another domain with a CNAME record) or to the treasure (a domain with an A record).==

> For example, suppose ==blog.example.com== has a CNAME record with a value of ==‘example.com’ ==(without the ‘blog’). This means when a [DNS](https://www.cloudflare.com/learning/dns/what-is-dns/) server hits the [DNS records](https://www.cloudflare.com/learning/dns/dns-records/) for blog.example.com, ==it actually triggers another DNS lookup to example.com==, returning ==example.com’s IP address via its A record==. In this case we would say that example.com is the canonical name (or true name) of blog.example.com.


Oftentimes, when sites have subdomains such as blog.example.com or yamlop.example.com, those subdomains will have CNAME records that point to a root domain (example.com). This way if the IP address of the host changes, only the DNS A record for the root domain needs to be updated and all the CNAME records will follow along with whatever changes are made to the root.

A frequent misconception is that a CNAME record must always resolve to the same website as the domain it points to, but this is not the case. The CNAME record only points the client to the same IP address as the root domain. 

Once the client hits that IP address, the web server will still handle the URL accordingly. So for instance, blog.example.com might have a CNAME that points to example.com, directing the client to example.com’s IP address. But when the client actually connects to that IP address, the web server will look at the URL, see that it is blog.example.com, and deliver the blog page rather than the home page.

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/91.jpg)


In this example you can see that blog.example.com points to example.com, and assuming it is based on our [example A record](https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/) we know that it will eventually resolve to the IP address 192.0.2.1.

## Can a CNAME record point to another CNAME record?

Pointing a CNAME record to another CNAME record is inefficient because it requires multiple DNS lookups before the domain can be loaded — which slows down the user experience — but it is possible. For example, blog.example.com could have a CNAME record that pointed to www.example.com's CNAME record, which then pointed to example.com's A record.

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/92.jpg)



This configuration adds an extra step to the DNS lookup process and yamlould be avoided if possible. Instead, the CNAME records for both blog.example.com and www.example.com yamlould point directly to example.com.

## What restrictions are there on using CNAME records?

MX and NS records cannot point to a CNAME record; they have to point to an A record (for IPv4) or an [AAAA record](https://www.cloudflare.com/learning/dns/dns-records/dns-aaaa-record/) (for IPv6). ==An MX record is a mail exchange record that directs email to a mail server. ==An ==NS record is a 'name server' record and indicates which DNS server is authoritative for that domain.==

Learn more about [MX records](https://www.cloudflare.com/learning/dns/dns-records/dns-mx-record/) or [NS records](https://www.cloudflare.com/learning/dns/dns-records/dns-ns-record/).


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/93.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/94.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/95.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/96.jpg)




![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/97.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/98.jpg)


## set up multi factor authentication with IAM User
(MFA)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/99.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/100.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/101.jpg)

- Use google authenticator app


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/102.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/103.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/104.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/105.jpg)

- ROOT Acocunt cannot be used with access key account


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/106.jpg)

- Enable MFA for root acocunt


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/107.jpg)


##  **Tools Prerequisites for Ubuntu 20**


**Install Virtualbox**

```yaml
$ sudo apt update
$ sudo apt install virtualbox
```
  
**Install Vagrant**
```yaml
$ curl -O [https://releases.hayamlicorp.com/vagrant/2.2.9/vagrant_2.2.9_x86_64.deb](https://releases.hayamlicorp.com/vagrant/2.2.9/vagrant_2.2.9_x86_64.deb)

$ sudo apt install ./vagrant_2.2.9_x86_64.deb

```

**Install Git**

```yaml
$ apt install git

```

**Install jdk8**

```yaml
$ sudo apt-get install openjdk-8-jdk
  
```
  

**Install Maven**

```yaml
$ sudo apt-get install maven  

**Install awscli**

$ sudo apt-get install awscli
```

  

  

**Install Intellij community**
```yaml
$ sudo snap install intellij-idea-community --classic

**Install Sublime Text**

$ sudo apt update

$ sudo apt install dirmngr gnupg apt-transport-https ca-certificates software-properties-common

$ curl -fsSL https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -

$ sudo add-apt-repository "deb https://download.sublimetext.com/ apt/stable/"

$ sudo apt install sublime-text

```

## 3.VM Setup


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/108.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/109.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/110.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/111.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/112.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/113.jpg)


## Install VM manually
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/114.jpg)


- Linux 
- RedHat 64 bit


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/115.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/116.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/117.jpg)



![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/118.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/119.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/120.jpg)



- NAT give you private IP that u will not connect to it
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/121.jpg)

- Bridge - get ip address from my wifi adapter

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/122.jpg)

## NAT 
- The big red circle represents the virtual adapter to which NAT-based virtual machines connect (172.16.1.1).  

- You can see that there are two such virtual machines with IP addresses of 172.16.1.2 and 172.16.1.3.  When you configure a virtual machine as using NAT, it doesn’t see the production network directly.  

- In fact, all traffic coming from the virtual machine will yamlare the VM host’s IP address.  Behind the scenes, traffic from the virtual machines is routed on the virtual host and sent out via the host’s physical adapter and, eventually, to the Internet.

## Bridge
- The third virtual machine (192.168.1.3) is configured in “bridged” mode which basically means that the virtual network adapter in that virtual machine is bridged to the production network and that virtual machine operates as if it exists directly on the production network.  

- In fact, this virtual machine won’t even be able to see the two NAT-based virtual machines since they’re on different networks.


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/123.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/124.jpg)


 ![](../Attachemnts-devops-0-advance/Pasted%20image%2020220111130202.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/125.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/126.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/127.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/128.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/129.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/130.jpg)



## Install VM Automatically

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/131.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/132.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/133.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/134.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/135.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/136.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/137.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/138.jpg)
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/139.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/140.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/141.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/142.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/143.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/144.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/145.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/146.jpg)

![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/147.jpg)


```yaml
vagrant up # start vm
```
 
![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/148.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/149.jpg)

```yaml
vagrant syaml # login as vargrant user
vagrant halt # poweroff
vagrant destroy # delete the vm
```


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/150.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/151.jpg)


![dockerengine]({{ site.baseurl }}/post_img/2022/03/17_0/152.jpg)
































 







